/**
 * Â© 2025 Melvin Jones Repol & its contributors . All rights reserved.
 * This project is licensed under the MIT License with Commons Clause.
*/
import{r as e,j as t}from"./CbKKHx2O.js";import{u as s}from"./C37ULjht.js";import{j as r}from"./MVkxfJpX.js";import{F as i,R as a}from"./ru3Q0AV5.js";import{b as o}from"./CWns3eDK.js";import{d as n}from"./D_eMUV-T.js";import{d as c,Q as d,U as l,aj as m,A as j,a as h,e as p,f as g,g as u,h as x}from"./BCoDuBWI.js";import"./D9QqU1Un.js";import"./z-cSZRUs.js";import"./D1Sfz1v5.js";import"./CR-CXyre.js";import"./CUNh_qGu.js";import"./tM1qHAtJ.js";import"./DylAs1sT.js";import"./yJGO6Amu.js";import"./CvkuIoXT.js";import"./B3ZIOLOa.js";import"./U6rf_yqH.js";import"./D68gzNyG.js";import"./6thM_Rat.js";import"./Eji1Pm7n.js";import"./CUBhYDUo.js";import"./Bhaa8ZPc.js";import"./K-dupnmX.js";import"./B3MjVzzP.js";import"./cwKO6bxQ.js";import"./C3hrCPXF.js";import"./Dw0KO6EP.js";import"./CzGuHLZU.js";import"./Bd5YRvRe.js";import"./UUb1f1Eq.js";import"./DqkGgfGl.js";import"./BXEMiIsG.js";import"./Bb7MnDjl.js";import"./C76xSmx-.js";import"./BPjVUy-D.js";import"./CTpwok2W.js";import"./Bzwk9agu.js";import"./BqHrj3jM.js";const v=()=>{const{addToast:v}=o(),[f,b]=e.useState(""),[w,N]=e.useState(null),[y,R]=e.useState(!1),[k,Q]=e.useState(!1),S=n(),{getRootProps:C,getInputProps:E}=s({onDrop:e=>{const t=e[0];if(t){const e=new FileReader;e.onloadend=()=>{N(e.result),D(e.result)},e.readAsDataURL(t)}}}),I=e=>{Q(!1),b(e),R(!0),setTimeout((()=>(R(!1),e&&0!==e.trim().length?/^[A-Z]{2}-\d+$/.test(e)?S(`/track/${e}`):void v("Invalid Tracking ID Number."):null)),1e3)},D=e=>{if(!e)return;const t=document.createElement("img");t.src=e,t.onload=()=>{const e=document.createElement("canvas"),s=e.getContext("2d");e.width=t.width,e.height=t.height,s.drawImage(t,0,0);const i=s.getImageData(0,0,e.width,e.height),a=r(i.data,e.width,e.height);if(!a)return v("No QR code found.");I(a.data)}};return t.jsxs("div",{className:"d-flex flex-column align-items-center",children:[y&&t.jsx("div",{className:"loading-overlay",children:t.jsx(c,{color:"primary",variant:"grow"})}),t.jsxs("h1",{className:"text-center",children:[t.jsx("span",{className:"text-primary",children:"Your"})," Shipment ",t.jsx("br",{}),"Our ",t.jsx("span",{className:"text-primary",children:"Platform"})]}),t.jsx("div",{children:t.jsxs(d,{className:"d-inline-block text-center border border-2",...C(),children:[t.jsx(l,{...E(),accept:".png,.jpg"}),!w&&t.jsxs("div",{className:"p-5",children:[t.jsx(m,{children:"Drag & Drop QRCode"}),t.jsx("p",{children:"or click to select an image"})]}),w&&t.jsx(j,{src:w,alt:"QRCode",className:"img-fluid",loading:"lazy"})]})}),t.jsx("div",{className:"mt-3",children:t.jsxs(h,{color:"primary",onClick:()=>(()=>{Q(!0);const e=document.createElement("video"),t=document.createElement("canvas"),s=t.getContext("2d");navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then((i=>{e.srcObject=i,e.setAttribute("style","position: absolute; top: 0; left: 0; width: 100%; height: auto; z-index: 50000;"),document.getElementById("video").appendChild(e),e.addEventListener("loadedmetadata",(()=>{e.play();const a=()=>{t.width=e.videoWidth,t.height=e.videoHeight,s.drawImage(e,0,0,t.width,t.height);const o=s.getImageData(0,0,t.width,t.height),n=r(o.data,t.width,t.height);n?(i.getTracks().forEach((e=>e.stop())),e.remove(),I(n.data)):requestAnimationFrame(a)};a()}))})).catch((e=>{v("Unable to access camera."),console.error("Error accessing camera:",e)}))})(),children:[t.jsx(i,{icon:a,className:"me-2"})," Open Camera"]})}),k&&t.jsxs(p,{alignment:"center",fullscreen:"sm",scrollable:!0,backdrop:"static",keyboard:!1,visible:k,onClose:()=>(()=>{Q(!1);const e=document.querySelector("video");e&&e.remove()})(),"aria-labelledby":"ScheduleShipment",children:[t.jsx(g,{children:t.jsx(u,{children:"QRCode Scanner"})}),t.jsxs(x,{className:"vh-100",children:[t.jsx("div",{id:"video",className:"h-50"}),"Instructions:",t.jsxs("ul",{children:[t.jsx("li",{children:"Ensure the QR code is well-lit and clearly visible."}),t.jsx("li",{children:"Hold the QR code steady in front of the camera."}),t.jsx("li",{children:"Position the QR code within the camera's frame for better detection."}),t.jsx("li",{children:"Avoid reflections or glare on the QR code surface."}),t.jsx("li",{children:"Keep the camera lens clean for optimal scanning."})]})]})]})]})};export{v as default};
