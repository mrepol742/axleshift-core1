/**
 * Â© 2025 Melvin Jones Repol & its contributors . All rights reserved.
 * This project is licensed under the MIT License with Commons Clause.
*/
import{r as e,R as s,j as t}from"./CbKKHx2O.js";import{E as r}from"./CUBhYDUo.js";import{F as i,c as a,n as o,a4 as n}from"./ru3Q0AV5.js";import c from"./JvcK6Ko9.js";import{H as l}from"./VudaBnFI.js";import{P as m}from"./1zCZrFgN.js";import{Q as d}from"./sScGIYWv.js";import{b as j}from"./CWns3eDK.js";import{k as p,d as h}from"./D_eMUV-T.js";import{d as x,b as f,c as b,a as g}from"./BCoDuBWI.js";import"./D9QqU1Un.js";import"./Bhaa8ZPc.js";import"./K-dupnmX.js";import"./z-cSZRUs.js";import"./Bnu3OxD9.js";import"./BNqS-k40.js";import"./0NUvlLuB.js";import"./tM1qHAtJ.js";import"./DylAs1sT.js";import"./yJGO6Amu.js";import"./CvkuIoXT.js";import"./B3ZIOLOa.js";import"./U6rf_yqH.js";import"./D68gzNyG.js";import"./6thM_Rat.js";import"./Eji1Pm7n.js";import"./B3MjVzzP.js";import"./cwKO6bxQ.js";import"./C3hrCPXF.js";import"./Dw0KO6EP.js";import"./CzGuHLZU.js";import"./Bd5YRvRe.js";import"./UUb1f1Eq.js";import"./DqkGgfGl.js";import"./BXEMiIsG.js";import"./Bb7MnDjl.js";import"./C76xSmx-.js";import"./BPjVUy-D.js";import"./CTpwok2W.js";import"./Bzwk9agu.js";import"./BqHrj3jM.js";const u=()=>{const{id:u}=p();h();const{addToast:y}=j(),[N,v]=e.useState(!0),[_,k]=e.useState(null),w=s.useRef(),P=s.useRef();return e.useEffect((()=>{(async()=>{axios.get(`/invoices/${u}`).then((e=>k(e.data))).finally((()=>v(!1)))})()}),[]),N?t.jsx("div",{className:"loading-overlay",children:t.jsx(x,{color:"primary",variant:"grow"})}):_?t.jsxs("div",{ref:w,children:[t.jsx(l,{children:t.jsxs("title",{children:[u," - Invoice | Axleshift"]})}),t.jsxs("div",{className:"font-monospace",children:[t.jsx("h1",{className:"text-uppercase fw-bold text-center",children:"Axleshift"}),t.jsxs("p",{className:"text-center",children:[t.jsx(i,{icon:a,className:"me-1"})," 4108 IM Bestlink College of the Phillippines",t.jsx("br",{}),t.jsx(i,{icon:o,className:"me-1"})," axleshift@gmail.com",t.jsx("br",{}),t.jsx(i,{icon:n,className:"me-1"})," +63 912 345 6789"]}),t.jsxs("div",{className:"bg-body-secondary p-4 mb-1",children:[t.jsxs("span",{className:"d-block",children:[t.jsx("strong",{children:"Invoice ID"}),": ",_.invoice_id]}),t.jsxs("span",{className:"d-block",children:[t.jsx("strong",{children:"Tracking Number"}),": ",_.freight_tracking_number]}),!0===_.freight_details.is_import?t.jsxs("span",{children:[t.jsx("strong",{children:"Name"}),": ",_.freight_details.to[0].name]}):t.jsxs("span",{children:[t.jsx("strong",{children:"Name"}),": ",_.freight_details.from[0].name]}),t.jsx("br",{}),t.jsx("br",{}),!0===_.freight_details.is_import?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"d-block",children:_.freight_details.to[0].address}),t.jsxs("span",{className:"d-block",children:[_.freight_details.to[0].city," ",_.freight_details.to[0].zip_code]}),t.jsx("span",{children:_.freight_details.to[0].country})]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"d-block",children:_.freight_details.from[0].address}),t.jsxs("span",{className:"d-block",children:[_.freight_details.from[0].city," ",_.freight_details.from[0].zip_code]}),t.jsx("span",{children:_.freight_details.from[0].country})]}),t.jsx("div",{className:"mb-4"}),"PAID"===_.status&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"d-flex justify-content-between",children:[t.jsx("strong",{children:"Date Paid"}),t.jsx("span",{className:"flex-grow-1 mx-3 border-bottom border-secondary mb-2 border-opacity-25"}),t.jsx("span",{children:new Date(_.updated_at).toLocaleString()})]}),t.jsxs("div",{className:"d-flex justify-content-between",children:[t.jsx("strong",{children:"Payment Method"}),t.jsx("span",{className:"flex-grow-1 mx-3 border-bottom border-secondary mb-2 border-opacity-25"}),t.jsx("span",{children:_.payment_method})]})]}),t.jsxs("div",{className:"d-flex justify-content-between",children:[t.jsx("strong",{children:"Amount Due"}),t.jsx("span",{className:"flex-grow-1 mx-3 border-bottom border-secondary mb-2 border-opacity-25"}),t.jsx("span",{children:new Intl.NumberFormat("en-US",{style:"currency",currency:_.currency}).format(_.amount)})]})]})]}),t.jsxs("div",{className:"d-flex justify-content-between p-2 small mb-2",children:[t.jsxs("small",{className:"d-block",children:["This invoice has been issued to"," ",!0===_.freight_details.is_import?_.freight_details.to[0].email:_.freight_details.from[0].email,t.jsx("br",{}),"in reference to shipment ",u,".",t.jsx("br",{}),"https://core1.axleshift.com","/invoices/",u]}),t.jsx(d,{value:u,className:"rounded-3 m-1",size:100})]}),t.jsxs("div",{className:"d-flex",children:["PENDING"===_.status&&t.jsx(g,{className:"btn btn-primary px-4 mb-3 me-2",onClick:e=>window.location.href=`https://checkout-staging.xendit.co/web/${_.invoice_id}`,children:"PAY NOW"}),t.jsx(g,{className:"btn btn-primary px-4 mb-3",ref:P,onClick:()=>{P.current.style.display="none";const e=getComputedStyle(document.body).backgroundColor;c(w.current,{scale:2,backgroundColor:e}).then((async s=>{const t=s.toDataURL("image/png"),i=new r("p","mm","a4"),a=210*s.height/s.width;i.setFillColor(e),i.rect(0,0,i.internal.pageSize.getWidth(),i.internal.pageSize.getHeight(),"F"),i.addImage(t,"PNG",0,10,210,a);const o=i.output("arraybuffer"),n=await m.load(o);n.setTitle(`Invoice-${u}`),n.setAuthor("Axleshift (https://core1.axleshift.com)"),n.setSubject(`Invoice for shipment #${u}`),n.setProducer("Axleshift Automated PDF Generator"),n.setCreator(`Axleshift (https://core1.axleshift.com/invioces/${u})`);const c=await n.save(),l=new Blob([c],{type:"application/pdf"}),d=URL.createObjectURL(l),j=document.createElement("a");j.href=d,j.download=`Invoice-${u}.pdf`,document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(d)})).catch((e=>console.error("Error generating PDF:",e))).finally((()=>{P.current.style.display="block"}))},children:"Download PDF"})]})]}):t.jsx(f,{className:"justify-content-center my-5",children:t.jsx(b,{md:6,children:t.jsxs("div",{className:"clearfix",children:[t.jsx("h1",{className:"float-start display-3 me-4 text-danger",children:"OOPS"}),t.jsx("h4",{children:"There was no shipment invoice found."}),t.jsx("p",{children:"Double check tracking number for any mistake."})]})})})};export{u as default};
