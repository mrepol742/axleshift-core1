/**
 * Â© 2025 Melvin Jones Repol & its contributors . All rights reserved.
 * This project is licensed under the MIT License with Commons Clause.
*/
import{R as e,r as a,j as s}from"./CbKKHx2O.js";import{R as n}from"./DfG9QjQz.js";import{P as l}from"./z-cSZRUs.js";import{b as o,e as t}from"./CWns3eDK.js";import{d as r}from"./D_eMUV-T.js";import{d as i,T as d,U as m,Y as c,a as u,e as b,f,g as x,h as v,i as p}from"./BCoDuBWI.js";const g=({data:l,callback:g})=>{var h,y,j,C,N,L,_,q,k,w,D,A,S,T,z,E,F,R,I,P,$,B,J,O,V;const{formData:Y,setFormData:Z}=l,U=e.useRef(),X=r(),{addToast:G}=o(),[H,K]=a.useState(!1),[M,Q]=a.useState(!1),W=a.useState(Y);a.useEffect((()=>{const e=e=>{JSON.stringify(W)!==JSON.stringify(Y)&&(e.preventDefault(),e.returnValue="You have unsaved changes. Do you really want to leave?")};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[Y]);const ee=(e,a)=>{const{name:s,value:n}=a.target;if(g){const a={...Y,[e]:{...Y[e],[s]:n}};return Z(a),g(a)}Z((a=>({...a,[e]:{...a[e],[s]:n}})))},ae=()=>{Q(!M)};return H?s.jsx("div",{className:"loading-overlay",children:s.jsx(i,{color:"primary",variant:"grow"})}):s.jsxs(d,{onSubmit:async e=>{if(g)return;e.preventDefault();const a=await U.current.executeAsync(),s=Y._id?`/update/${Y._id}`:"/add";K(!0),axios.post(`/addresses${s}`,{...Y,recaptcha_ref:a}).then((e=>{G(e.data.message),X("/my-addresses")})).catch((e=>{var a,s;const n=(null==(s=null==(a=e.response)?void 0:a.data)?void 0:s.error)||("network error"===e.message?"Server is offline or restarting please wait":e.message);G(n)})).finally((()=>K(!1)))},children:[s.jsxs("div",{className:"d-block d-lg-flex gap-5",children:[s.jsxs("div",{children:[s.jsx("h4",{children:"From"}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"First and Last Name",name:"name",value:null==(h=Y.from)?void 0:h.name,onChange:e=>ee("from",e),required:!0}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Company",name:"company",value:null==(y=Y.from)?void 0:y.company,onChange:e=>ee("from",e),required:!0}),s.jsx(c,{className:"mb-3",name:"business_contract",label:"Business Contract",checked:null==(j=Y.from)?void 0:j.business_contract,onChange:e=>ee("from",e)}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Country",name:"country",value:null==(C=Y.from)?void 0:C.country,onChange:e=>ee("from",e),required:!0}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Address",name:"address",value:null==(N=Y.from)?void 0:N.address,onChange:e=>ee("from",e),required:!0}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Address 2",name:"address2",value:null==(L=Y.from)?void 0:L.address2,onChange:e=>ee("from",e)}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Address 3",name:"address3",value:null==(_=Y.from)?void 0:_.address3,onChange:e=>ee("from",e)}),s.jsxs("div",{className:"d-block d-sm-flex gap-3",children:[s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Zip Code",name:"zip_code",value:null==(q=Y.from)?void 0:q.zip_code,onChange:e=>ee("from",e),required:!0}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"City",name:"city",value:null==(k=Y.from)?void 0:k.city,onChange:e=>ee("from",e),required:!0})]}),s.jsxs("div",{className:"d-block d-sm-flex gap-3",children:[s.jsx(m,{type:"email",className:"mb-3",floatingLabel:"Email",name:"email",value:null==(w=Y.from)?void 0:w.email,onChange:e=>ee("from",e),required:!0}),s.jsx(m,{type:"number",className:"mb-3",floatingLabel:"Phone number",name:"phone_number",value:null==(D=Y.from)?void 0:D.phone_number,onChange:e=>ee("from",e),required:!0})]}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"VAT/TAX ID",name:"vat_tax_id",value:null==(A=Y.from)?void 0:A.vat_tax_id,onChange:e=>ee("from",e)})]}),s.jsxs("div",{children:[s.jsx("h4",{children:"To"}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Name",name:"name",value:null==(S=Y.to)?void 0:S.name,onChange:e=>ee("to",e),required:!0}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Company",name:"company",value:null==(T=Y.to)?void 0:T.company,onChange:e=>ee("to",e),required:!0}),s.jsx(c,{className:"mb-3",name:"business_contract",label:"Business Contract",checked:null==(z=Y.to)?void 0:z.business_contract,onChange:e=>ee("to",e)}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Country",name:"country",value:null==(E=Y.to)?void 0:E.country,onChange:e=>ee("to",e),required:!0}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Address",name:"address",value:null==(F=Y.to)?void 0:F.address,onChange:e=>ee("to",e),required:!0}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Address 2",name:"address2",value:null==(R=Y.to)?void 0:R.address2,onChange:e=>ee("to",e)}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Address 3",name:"address3",value:null==(I=Y.to)?void 0:I.address3,onChange:e=>ee("to",e)}),s.jsxs("div",{className:"d-block d-sm-flex gap-3",children:[s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Zip Code",name:"zip_code",value:null==(P=Y.to)?void 0:P.zip_code,onChange:e=>ee("to",e),required:!0}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"City",name:"city",value:null==($=Y.to)?void 0:$.city,onChange:e=>ee("to",e),required:!0})]}),s.jsxs("div",{className:"d-block d-sm-flex gap-3",children:[s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Email",name:"email",value:null==(B=Y.to)?void 0:B.email,onChange:e=>ee("to",e),required:!0}),s.jsx(m,{type:"number",className:"mb-3",floatingLabel:"Phone number",name:"phone_number",value:null==(J=Y.to)?void 0:J.phone_number,onChange:e=>ee("to",e),required:!0})]}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"Type of ID",name:"id_type",value:null==(O=Y.to)?void 0:O.id_type,onChange:e=>ee("to",e),required:!0}),s.jsx(m,{type:"text",className:"mb-3",floatingLabel:"ID Number",name:"id_number",value:null==(V=Y.to)?void 0:V.id_number,onChange:e=>ee("to",e),required:!0})]})]}),!g&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"d-flex justify-content-between",children:[s.jsx("div",{className:"d-flex2 mt-4 mb-3",children:s.jsx(u,{color:"danger",className:"me-2 rounded",onClick:e=>Q(!0),children:"Delete"})}),s.jsxs("div",{className:"d-flex mt-4 mb-3",children:[s.jsx(u,{type:"submit",color:"primary",className:"me-2 rounded",children:"Save"}),s.jsx(u,{type:"button",color:"outline-secondary",className:"rounded",onClick:e=>X("/my-addresses"),children:"Cancel"})]})]}),s.jsxs(b,{backdrop:"static",alignment:"center",visible:M,scrollable:!0,"aria-labelledby":"delete-confirmation",children:[s.jsx(f,{onClose:ae,children:s.jsx(x,{id:"delete-confirmation",children:"Confirm Delete"})}),s.jsxs(v,{children:["Do you really want to delete this address?",s.jsx("br",{}),s.jsx("b",{className:"small",children:s.jsx("u",{children:"This is irreversable!"})})]}),s.jsxs(p,{children:[s.jsx(u,{color:"secondary",onClick:ae,children:"Cancel"}),s.jsx(u,{color:"danger",onClick:async e=>{if(g)return;e.preventDefault();const a=await U.current.executeAsync();K(!0),axios.post(`/addresses/delete/${Y._id}`,{recaptcha_ref:a}).then((e=>{G(e.data.message),X("/my-addresses")})).catch((e=>{var a,s;const n=(null==(s=null==(a=e.response)?void 0:a.data)?void 0:s.error)||("network error"===e.message?"Server is offline or restarting please wait":e.message);G(n)})).finally((()=>K(!1)))},children:"Delete"})]})]}),s.jsx(n,{ref:U,size:"invisible",sitekey:t})]})]})};g.propTypes={data:l.object.isRequired,callback:l.func};export{g as F};
